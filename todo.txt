project infrastructure
- gcc support

refactor
- consider removing json_cache class, as all the responses now are being cached in http_cache
- the librespot and process winapi is written poorly, wrap it up well
- working with plpaylists through Use the snapshot_id to reduce amount of requests
- investigate "market" fields for some API requests, for now completly
- parallelize playlists and saved tracks request via pool, using offset and limit fields

application ideas
- grab lyrics from here? https://coda.io/@musixmatch/musixmatch-lyrics-api
- is there other way to track fresh releases?
- librespot as a win service to avoid stopping playback, while closing far
- propagate spotify settings to librespot: normalisation, autoplay-similar, bitrate and etc. https://github.com/librespot-org/librespot/wiki/Options
- panels
    - ctrl + I - filtering of albums? singles/EPs/LPs; maybe something else?
    - managing playlists via standard Far functions: create folder, move/remove from panel
    - while an album or playlist is on the panel and player is shown, update a selection of file in accordance to the playing track
    - F3 on folders -> start playback
    - custom columns to show additional info, track lenght and etc
    - local far hotkey to open app player even if a spotifar panel is passive
    - comamnds for console input?
- player UI
    - goto artist, album, playlist etc.
    - extended player view with the list of tracks (or maybe on panel?)
    - recreate a volume control into slider?

bugs
- after refreshing an access token, the plugin starts one more librespot process
- on the album tracks view search files with Alt does not work properly due to year in the name
- big http cache causes plugin to freeze while closing






//// sample how to show loading splash screen

    // TODO: unfinished, ugly
    json url(request_url);

    size_t entries_received = 0;
    auto ss = config::ps_info.SaveScreen(0, 0, -1, -1);
    wstring message = L"Loading\nRequesting data...";

    do
    {
        config::ps_info.Message(&MainGuid,&FarMessageGuid,
            FMSG_ALLINONE,
            L"",
            (const wchar_t * const *)message.c_str(),
            0,0);

        auto r = api->get(url);
        if (utils::http::is_success(r->status))
        {
            json data = json::parse(r->body);
            if (!data_key.empty())
                data = data.at(data_key);

                url = data["next"];

            const auto &entries = data["items"].get<T>();
            result.insert(result.end(), entries.begin(), entries.end());
            
            entries_received += entries.size();
            message = std::format(L"Loading\nEntries received {}/{}",
                entries_received, data["total"].get<int>());
        }
    }
    while (!url.is_null());

    config::ps_info.RestoreScreen(ss);